#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Update the worklog if the script exists
if [ -f ".cursor/rules/update_worklog" ]; then
  echo "Updating worklog before push..."
  ./.cursor/rules/update_worklog
  
  # Add the updated worklog to the commit
  git add worklog.md
fi

npm run lint
if [ $? -ne 0 ]; then
  echo "Lint failed. Aborting push."
  exit 1
fi

npx prettier --check .
if [ $? -ne 0 ]; then
  echo "Prettier check failed. Aborting push."
  exit 1
fi

npm run build
if [ $? -ne 0 ]; then
  echo "Build failed. Aborting push."
  exit 1
fi 